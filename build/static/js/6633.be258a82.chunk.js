"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6633],{29872:function(e,s,t){t.d(s,{v:function(){return o}});const o={appID:"9860caa9-1655-4c97-ba6f-ca9a203de773",redirectUri:"https://dssui-asset-manager.herokuapp.com",api:"https://dssui-asset-manager.herokuapp.com",scopes:["user.read"],authority:"https://login.microsoftonline.com/dssui.onmicrosoft.com",postLogoutRedirectUri:""}},33984:function(e,s,t){var o=t(27998),a=t(46417);s.Z=e=>{let{visible:s,popupMsg:t,onClose:i}=e;return(0,a.jsxs)(o.Tk,{size:"sm",visible:s,onClose:i,children:[(0,a.jsx)(o.p0,{children:(0,a.jsx)(o.fl,{children:"Error"})}),(0,a.jsx)(o.sD,{children:t})]})}},7174:function(e,s,t){var o=t(27998),a=t(46417);s.Z=e=>{let{visible:s,popupMsg:t,onClose:i}=e;return(0,a.jsxs)(o.Tk,{size:"sm",visible:s,onClose:i,children:[(0,a.jsx)(o.p0,{children:(0,a.jsx)(o.fl,{children:"Success"})}),(0,a.jsx)(o.sD,{children:t})]})}},46633:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var o=t(47313),a=t(31881),i=t.n(a),c=t(75903),n=t(29872),r=t(27998),l=t(46417);var d=e=>{let{onAdd:s,officeList:t,onError:a}=e;const[i,c]=(0,o.useState)(""),[n,d]=(0,o.useState)(""),f=e=>{e.target.reset(),c(""),d("")};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.lx,{className:"add-user row g-3 needs-validation  justify-content-center",onSubmit:e=>{e.preventDefault();t.some((e=>parseInt(e.off_id)===parseInt(i)))?a("Office already exists."):(s({offID:i,offDesc:n}),f(e))},children:[(0,l.jsx)(r.b7,{md:3,children:(0,l.jsx)(r.jO,{className:"form-control",type:"text",name:"offID",placeholder:"Office ID",onChange:e=>{c(e.target.value.trim())},maxLength:3,required:!0})}),(0,l.jsx)(r.b7,{md:3,children:(0,l.jsx)(r.jO,{className:"form-control",type:"text",name:"desc",placeholder:"Description",onChange:e=>{d(e.target.value.trim())},maxLength:45})}),(0,l.jsx)(r.b7,{md:2,children:(0,l.jsx)(r.u5,{type:"submit",color:"secondary",children:"Add office"})})]})})};var f=e=>{let{visible:s,onClose:t,formContent:a,onEdit:i,onDelete:c,onCloseEdit:n}=e;const[d,f]=(0,o.useState)(""),[u,m]=(0,o.useState)(!1),[p,h]=(0,o.useState)(""),[x,j]=(0,o.useState)(!1);return(0,l.jsxs)(r.Tk,{visible:s,backdrop:"static",onClose:t,children:[(0,l.jsx)(r.p0,{onClose:()=>setVisibleOffice(!1),children:(0,l.jsx)(r.fl,{children:"Edit office"})}),(0,l.jsx)(r.sD,{children:(0,l.jsxs)(r.lx,{className:"add-user row g-3 needs-validation  justify-content-center",onSubmit:e=>{e.preventDefault();const s={off_id:u?d:a.off_id,off_desc:x?p:a.off_desc};i(s),j(!1),m(!1)},children:[(0,l.jsx)(r.b7,{md:2,children:(0,l.jsx)(r.jO,{className:"form-control",type:"text",name:"offID",placeholder:"Office ID",defaultValue:a.off_id,onChange:e=>{m(!0),f(e.target.value.trim())},maxLength:3,required:!0})}),(0,l.jsx)(r.b7,{md:7,children:(0,l.jsx)(r.jO,{className:"form-control",type:"text",name:"offDesc",defaultValue:a.off_desc,placeholder:"Description",onChange:e=>{j(!0),console.log(e.target.value.trim()),h(e.target.value.trim())},maxLength:45})}),(0,l.jsxs)(r.b7,{xs:12,className:"modal-footer",children:[(0,l.jsx)(r.u5,{color:"secondary",onClick:n,children:"Cancel"}),(0,l.jsx)(r.u5,{color:"primary",onClick:()=>c(a.off_id),children:"Delete office"}),(0,l.jsx)(r.u5,{color:"primary",type:"submit",children:"Save changes"})]})]})})]})},u=t(7174),m=t(33984);t(43533);var p=()=>{const[e,s]=(0,o.useState)([]),[t,a]=(0,o.useState)(!1),[r,p]=(0,o.useState)({}),[h,x]=(0,o.useState)({}),[j,g]=(0,o.useState)(!1),[v,b]=(0,o.useState)(!1),[_,y]=(0,o.useState)(""),C=async()=>{console.log("fetching data..."),i().get("".concat(n.v.api,"/api/offices")).then((e=>{s(e.data)}))};(0,o.useEffect)((()=>{setTimeout((()=>{C()}),2e3)}),[s]);const D=()=>{a(!1)},S=e=>{y(e),b(!v)};return(0,l.jsxs)("div",{className:"table",children:[(0,l.jsx)(u.Z,{visible:j,popupMsg:_,onClose:()=>{g(!1)}}),(0,l.jsx)(m.Z,{visible:v,popupMsg:_,onClose:()=>{b(!1)}}),(0,l.jsx)(f,{visible:t,onClose:D,formContent:r,onEdit:e=>{let s;r.off_desc===e.off_desc&&r.off_id===e.off_id?S("No changes were made."):(s={...e,prev_id:r.off_id},i().put("".concat(n.v.api,"/api/edit-office"),s).then((()=>{y("Office successfully updated."),g(!j),setTimeout((()=>{C()}),2e3)})).catch((e=>{a(!1),y(e.message),b(!v),console.log(e.message)}))),a(!1)},onDelete:e=>{i().delete("".concat(n.v.api,"/api/delete-office/").concat(e)).then((()=>{y("Entry successfully deleted."),g(!j),a(!1),setTimeout((()=>{C()}),2e3)})).catch((e=>{a(!1),y(e.message),b(!v)}))},onCloseEdit:D}),(0,l.jsx)("div",{className:"table card",children:(0,l.jsx)(d,{onAdd:e=>{i().post("".concat(n.v.api,"/api/add-office"),{offID:e.offID,offDesc:e.offDesc}).then((e=>{y("Office successfully added."),g(!j),setTimeout((()=>{C()}),2e3)})).catch((e=>{a(!1),y(e.message),b(!v),console.log(e.message)}))},officeList:e,onError:S})}),(0,l.jsx)("div",{className:"table card",children:(0,l.jsx)(c.uE,{cleaner:!0,columns:[{key:"off_id",label:"ID"},{key:"off_desc",label:"Description"},{key:"show_details",label:"",_style:{width:"1%"},filter:!1,sorter:!1}],tableProps:{hover:!0,responsive:!0},columnSorter:!0,items:e,pagination:!0,itemsPerPage:10,tableFilter:!0,scopedColumns:{show_details:e=>(0,l.jsx)("td",{className:"py-2",children:(0,l.jsx)(c.u5,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:()=>{p(e),x(e),a(!0)},children:"Edit"})})}})})]})}}}]);