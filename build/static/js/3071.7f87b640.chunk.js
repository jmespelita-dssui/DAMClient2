"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3071],{29872:function(e,t,s){s.d(t,{v:function(){return a}});const a={appID:"9860caa9-1655-4c97-ba6f-ca9a203de773",redirectUri:"https://dssui-asset-manager.herokuapp.com",api:"https://dssui-asset-manager.herokuapp.com",scopes:["user.read"],authority:"https://login.microsoftonline.com/dssui.onmicrosoft.com",postLogoutRedirectUri:""}},33984:function(e,t,s){var a=s(27998),l=s(46417);t.Z=e=>{let{visible:t,popupMsg:s,onClose:o}=e;return(0,l.jsxs)(a.Tk,{size:"sm",visible:t,onClose:o,children:[(0,l.jsx)(a.p0,{children:(0,l.jsx)(a.fl,{children:"Error"})}),(0,l.jsx)(a.sD,{children:s})]})}},7174:function(e,t,s){var a=s(27998),l=s(46417);t.Z=e=>{let{visible:t,popupMsg:s,onClose:o}=e;return(0,l.jsxs)(a.Tk,{size:"sm",visible:t,onClose:o,children:[(0,l.jsx)(a.p0,{children:(0,l.jsx)(a.fl,{children:"Success"})}),(0,l.jsx)(a.sD,{children:s})]})}},63071:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var a=s(47313),l=s(31881),o=s.n(l),n=(s(12635),s(29872)),i=s(27998),r=s(46417);var c=e=>{let{onAdd:t,employeeList:s,onError:l}=e;const[o,n]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)("ACTIVE");return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.lx,{className:"add-user row g-3 needs-validation justify-content-center",onSubmit:e=>{e.preventDefault();const a="".concat(o," ").concat(c);s.some((e=>"".concat(e.last_name," ").concat(e.first_name)===a))?l("User already exists."):(console.log("addEmployee",o,c,u),t({lastName:o,firstName:c,status:u}),e.target.reset(),n(""),d(""),m("ACTIVE"))},children:[(0,r.jsx)(i.b7,{md:4,children:(0,r.jsx)(i.jO,{className:"form-control",type:"text",name:"lastName",maxLength:45,placeholder:"Last name",onChange:e=>{console.log(e.target.value.trim()),n(e.target.value.trim())},required:!0})}),(0,r.jsx)(i.b7,{md:4,children:(0,r.jsx)(i.jO,{className:"form-control",type:"text",name:"firstName",placeholder:"First name",onChange:e=>{console.log(e.target.value.trim()),d(e.target.value.trim())},maxLength:45,required:!0})}),(0,r.jsx)(i.b7,{md:2,children:(0,r.jsxs)(i.LX,{className:"form-select",onChange:e=>{console.log(e.target.value.trim()),m(e.target.value)},required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select status"}),(0,r.jsx)("option",{value:"ACTIVE",children:"ACTIVE"}),(0,r.jsx)("option",{value:"INACTIVE",children:"INACTIVE"})]})}),(0,r.jsx)(i.b7,{md:2,children:(0,r.jsx)(i.u5,{type:"submit",color:"secondary",children:"Add employee"})})]})})},d=s(75903);var u=e=>{let{visible:t,onClose:s,formContent:l,onEdit:o,onDelete:n}=e;const[i,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)(""),[x,j]=(0,a.useState)(!1),[f,v]=(0,a.useState)("ACTIVE"),[g,C]=(0,a.useState)(!1);return(0,r.jsxs)(d.Tk,{visible:t,size:"lg",backdrop:"static",onClose:s,children:[(0,r.jsx)(d.p0,{onClose:()=>setVisibleEmployee(!1),children:(0,r.jsx)(d.fl,{children:"Edit employee"})}),(0,r.jsx)(d.sD,{children:(0,r.jsxs)(d.lx,{className:"row g-3 needs-validation justify-content-center",onSubmit:e=>{e.preventDefault();const t={emp_id:l.emp_id,last_name:u?i:l.last_name,first_name:x?p:l.first_name,status:g?f:l.status};m(!1),j(!1),C(!1),console.log("from Modal",t),o(t)},children:[(0,r.jsxs)(d.b7,{md:4,children:[(0,r.jsx)(d.L8,{htmlFor:"validationDefault01",children:"Last Name"}),(0,r.jsx)(d.jO,{type:"text",id:"validationDefault01",defaultValue:l.last_name,maxLength:45,onChange:e=>{m(!0),c(e.target.value.trim()),console.log(e.target.value.trim())},required:!0})]}),(0,r.jsxs)(d.b7,{md:4,children:[(0,r.jsx)(d.L8,{htmlFor:"validationDefault02",children:"First Name"}),(0,r.jsx)(d.jO,{type:"text",id:"validationDefault02",defaultValue:l.first_name,maxLength:45,onChange:e=>{j(!0),h(e.target.value.trim())},required:!0})]}),(0,r.jsxs)(d.b7,{md:4,children:[(0,r.jsx)(d.L8,{htmlFor:"validationDefault04",children:"Status"}),(0,r.jsxs)(d.LX,{id:"validationDefault04",onChange:e=>{C(!0),v(e.target.value.trim())},defaultValue:l.status,children:[(0,r.jsx)("option",{value:"",children:"Choose..."}),(0,r.jsx)("option",{value:"ACTIVE",children:"ACTIVE"}),(0,r.jsx)("option",{value:"INACTIVE",children:"INACTIVE"})]}),(0,r.jsx)(d.CO,{invalid:!0,children:"Please provide a valid status."})]}),(0,r.jsxs)(d.b7,{xs:12,className:"modal-footer",children:[(0,r.jsx)(d.u5,{color:"secondary",onClick:s,children:"Cancel"}),(0,r.jsx)(d.u5,{color:"primary",onClick:()=>n(l.emp_id),children:"Delete user"}),(0,r.jsx)(d.u5,{color:"primary",type:"submit",children:"Save changes"})]})]})})]})},m=s(7174),p=s(33984);s(43533);var h=()=>{const[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!1),[i,h]=(0,a.useState)({}),[x,j]=(0,a.useState)({last_name:"",first_name:"",status:""}),[f,v]=(0,a.useState)(!1),[g,C]=(0,a.useState)(!1),[y,_]=(0,a.useState)(""),b=async()=>{console.log("fetching data..."),o().get("".concat(n.v.api,"/api/employees")).then((e=>{t(e.data)}))};(0,a.useEffect)((()=>{setTimeout((()=>{b()}),2e3)}),[t]);const E=e=>{_(e),C(!g)};return(0,r.jsxs)("div",{className:"table",children:[(0,r.jsx)(m.Z,{visible:f,popupMsg:y,onClose:()=>{v(!1)}}),(0,r.jsx)(p.Z,{visible:g,popupMsg:y,onClose:()=>{C(!1)}}),(0,r.jsx)(u,{visible:s,formContent:i,onClose:()=>{l(!1)},onEdit:e=>{i.last_name===e.last_name&&i.first_name===e.first_name&&i.status==e.status?E("No changes were made."):o().put("".concat(n.v.api,"/api/edit-employee"),e).then((()=>{_("Employee successfully updated."),v(!f),setTimeout((()=>{b()}),2e3)})).catch((e=>{l(!1),_(e.message),C(!g),console.log(e.message)})),l(!1),console.log(e)},onDelete:e=>{o().delete("".concat(n.v.api,"/api/delete-employee/").concat(e)).then((e=>{_("Entry successfully deleted."),v(!f),l(!1),setTimeout((()=>{b()}),2e3)})).catch((e=>{l(!1),_(e.message),C(!g)}))}}),(0,r.jsx)("div",{className:"table card",children:(0,r.jsx)(c,{onAdd:e=>{console.log("addEmployee: ",e),o().post("".concat(n.v.api,"/api/add-employee"),{last_name:e.lastName,first_name:e.firstName,status:e.status}).then((()=>{_("Employee successfully added."),v(!f),setTimeout((()=>{b()}),2e3)})).catch((e=>{l(!1),_(e.message),C(!g),console.log(e.message)}))},employeeList:e,onError:E})}),(0,r.jsx)("div",{className:"table card",children:(0,r.jsx)(d.uE,{cleaner:!0,columns:[{key:"emp_id",label:"ID"},"last_name","first_name","status",{key:"show_details",label:"",_style:{width:"1%"},filter:!1,sorter:!1}],tableProps:{hover:!0,responsive:!0},columnSorter:!0,items:e,pagination:!0,itemsPerPage:10,tableFilter:!0,scopedColumns:{show_details:e=>(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(d.u5,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:()=>{h(e),j(e),l(!0)},children:"Edit"})})}})})]})}}}]);