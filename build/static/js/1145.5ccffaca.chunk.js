"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1145],{29872:function(e,s,t){t.d(s,{v:function(){return c}});const c={appID:"9860caa9-1655-4c97-ba6f-ca9a203de773",redirectUri:"https://dssui-asset-manager.herokuapp.com",api:"https://dssui-asset-manager.herokuapp.com",scopes:["user.read"],authority:"https://login.microsoftonline.com/dssui.onmicrosoft.com",postLogoutRedirectUri:""}},33984:function(e,s,t){var c=t(27998),a=t(46417);s.Z=e=>{let{visible:s,popupMsg:t,onClose:o}=e;return(0,a.jsxs)(c.Tk,{size:"sm",visible:s,onClose:o,children:[(0,a.jsx)(c.p0,{children:(0,a.jsx)(c.fl,{children:"Error"})}),(0,a.jsx)(c.sD,{children:t})]})}},7174:function(e,s,t){var c=t(27998),a=t(46417);s.Z=e=>{let{visible:s,popupMsg:t,onClose:o}=e;return(0,a.jsxs)(c.Tk,{size:"sm",visible:s,onClose:o,children:[(0,a.jsx)(c.p0,{children:(0,a.jsx)(c.fl,{children:"Success"})}),(0,a.jsx)(c.sD,{children:t})]})}},71145:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var c=t(47313),a=t(31881),o=t.n(a),n=t(29872),r=t(27998),l=t(46417);var i=e=>{let{onAdd:s,sectorList:t,onError:a}=e;const[o,n]=(0,c.useState)(""),[i,d]=(0,c.useState)(""),u=e=>{e.target.reset(),n(""),d("")};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.lx,{className:"add-user row g-3 needs-validation justify-content-center",onSubmit:e=>{e.preventDefault();t.some((e=>e.sect_name===o))?a("Sector already exists."):(s({sectName:o,sectStatus:i}),u(e))},children:[(0,l.jsx)(r.b7,{md:5,children:(0,l.jsx)(r.jO,{className:"form-control",type:"text",name:"sectName",placeholder:"Sector",onChange:e=>{n(e.target.value.trim())},maxLength:45,required:!0})}),(0,l.jsx)(r.b7,{md:3,children:(0,l.jsxs)(r.LX,{className:"form-select",onChange:e=>{d(e.target.value)},required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select status"}),(0,l.jsx)("option",{defaultValue:"ACTIVE",children:"ACTIVE"}),(0,l.jsx)("option",{value:"INACTIVE",children:"INACTIVE"})]})}),(0,l.jsx)(r.b7,{md:2,children:(0,l.jsx)(r.u5,{type:"submit",color:"secondary",children:"Add sector"})})]})})};var d=e=>{let{visible:s,onClose:t,formContent:a,sector:o,sectorList:n,onEdit:i,onDelete:d,onError:u,onCloseEdit:m}=e;const[h,p]=(0,c.useState)(""),[x,j]=(0,c.useState)(!1),[_,g]=(0,c.useState)(""),[f,v]=(0,c.useState)(!1);return(0,l.jsxs)(r.Tk,{visible:s,backdrop:"static",onClose:t,children:[(0,l.jsx)(r.p0,{onClose:()=>setVisibleSector(!1),children:(0,l.jsx)(r.fl,{children:"Edit sector"})}),(0,l.jsx)(r.sD,{children:(0,l.jsxs)(r.lx,{className:"add-user row g-3 needs-validation justify-content-center",onSubmit:e=>{e.preventDefault();const s={sect_id:a.sect_id,sect_name:x?h:a.sect_name,sect_status:f?_:a.sect_status};console.log("filter + some",n.filter((e=>e.sect_name!==a.sect_name)).some((e=>e.sect_name===s.sect_name)));const t=n.filter((e=>e.sect_name!==a.sect_name)).some((e=>e.sect_name===s.sect_name));t?u("Sector already exists."):(i(s),j(!1),v(!1))},children:[(0,l.jsx)(r.b7,{md:7,children:(0,l.jsx)(r.jO,{className:"form-control",type:"text",name:"sectName",placeholder:"Sector",defaultValue:a.sect_name,onChange:e=>{j(!0),p(e.target.value.trim())},maxLength:45,required:!0})}),(0,l.jsx)(r.b7,{md:4,children:(0,l.jsxs)(r.LX,{className:"form-select",onChange:e=>{v(!0),g(e.target.value)},defaultValue:a.sect_status,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select status"}),(0,l.jsx)("option",{defaultValue:"ACTIVE",children:"ACTIVE"}),(0,l.jsx)("option",{value:"INACTIVE",children:"INACTIVE"})]})}),(0,l.jsxs)(r.b7,{xs:12,className:"modal-footer",children:[(0,l.jsx)(r.u5,{color:"secondary",onClick:m,children:"Cancel"}),(0,l.jsx)(r.u5,{color:"primary",onClick:()=>d(o.sect_id),children:"Delete sector"}),(0,l.jsx)(r.u5,{color:"primary",type:"submit",children:"Save changes"})]})]})})]})},u=t(7174),m=t(33984),h=t(75903);t(43533);var p=()=>{const[e,s]=(0,c.useState)([]),[t,a]=(0,c.useState)(!1),[r,p]=(0,c.useState)({}),[x,j]=(0,c.useState)({sect_id:"",sect_name:"",sect_status:""}),[_,g]=(0,c.useState)(!1),[f,v]=(0,c.useState)(!1),[b,C]=(0,c.useState)(""),S=async()=>{console.log("fetching data..."),o().get("".concat(n.v.api,"/api/sectors")).then((e=>{s(e.data)}))};(0,c.useEffect)((()=>{setTimeout((()=>{S()}),2e3)}),[s]);const y=()=>{a(!1)},E=e=>{C(e),v(!f)};return(0,l.jsxs)("div",{className:"table",children:[(0,l.jsx)(u.Z,{visible:_,popupMsg:b,onClose:()=>{g(!1)}}),(0,l.jsx)(m.Z,{visible:f,popupMsg:b,onClose:()=>{v(!1)}}),(0,l.jsx)(d,{visible:t,onClose:y,onEdit:e=>{r.sect_id===e.sect_id&&r.sect_name===e.sect_name&&r.sect_status==e.sect_status?E("No changes were made."):o().put("".concat(n.v.api,"/api/edit-sector"),e).then((()=>{C("Sector successfully updated."),g(!_),setTimeout((()=>{S()}),2e3)})).catch((e=>{a(!1),C(e.message),v(!f),console.log(e.message)})),a(!1),console.log(e)},formContent:r,sector:x,sectorList:e,onDelete:e=>{console.log("deleting sector",e),o().delete("".concat(n.v.api,"/api/delete-sector/").concat(e)).then((()=>{C("Entry successfully deleted."),g(!_),a(!1),setTimeout((()=>{S()}),2e3)})).catch((e=>{a(!1),C(e.message),v(!f)}))},onError:E,onCloseEdit:y}),(0,l.jsx)("div",{className:"table card",children:(0,l.jsx)(i,{onAdd:e=>{console.log("adding sector:"),console.log(e),o().post("".concat(n.v.api,"/api/add-sector"),{sect_name:e.sectName,sect_status:e.sectStatus}).then((e=>{C("Sector successfully added."),g(!_),setTimeout((()=>{S()}),2e3)})).catch((e=>{a(!1),C(e.message),v(!f),console.log(e.message)}))},sectorList:e,onError:E})}),(0,l.jsx)("div",{className:"table card",children:(0,l.jsx)(h.uE,{cleaner:!0,columns:[{key:"sect_id",label:"ID"},{key:"sect_name",label:"Name"},{key:"sect_status",label:"Status"},{key:"show_details",label:"",_style:{width:"1%"},filter:!1,sorter:!1}],tableProps:{hover:!0,responsive:!0},columnSorter:!0,items:e,pagination:!0,itemsPerPage:10,tableFilter:!0,scopedColumns:{show_details:e=>(0,l.jsx)("td",{className:"py-2",children:(0,l.jsx)(h.u5,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:()=>{p(e),j(e),a(!0)},children:"Edit"})})}})})]})}}}]);