"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6894],{29872:function(e,s,t){t.d(s,{v:function(){return o}});const o={appID:"9860caa9-1655-4c97-ba6f-ca9a203de773",redirectUri:"https://dssui-asset-manager.herokuapp.com",api:"https://dssui-asset-manager.herokuapp.com",scopes:["user.read"],authority:"https://login.microsoftonline.com/dssui.onmicrosoft.com",postLogoutRedirectUri:""}},33984:function(e,s,t){var o=t(27998),i=t(46417);s.Z=e=>{let{visible:s,popupMsg:t,onClose:r}=e;return(0,i.jsxs)(o.Tk,{size:"sm",visible:s,onClose:r,children:[(0,i.jsx)(o.p0,{children:(0,i.jsx)(o.fl,{children:"Error"})}),(0,i.jsx)(o.sD,{children:t})]})}},7174:function(e,s,t){var o=t(27998),i=t(46417);s.Z=e=>{let{visible:s,popupMsg:t,onClose:r}=e;return(0,i.jsxs)(o.Tk,{size:"sm",visible:s,onClose:r,children:[(0,i.jsx)(o.p0,{children:(0,i.jsx)(o.fl,{children:"Success"})}),(0,i.jsx)(o.sD,{children:t})]})}},76894:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var o=t(47313),i=t(75903),r=t(31881),a=t.n(r),n=(t(29872),t(27998)),d=t(46417);var l=e=>{let{onAdd:s,domUidList:t,onError:i}=e;const[r,a]=(0,o.useState)(""),l=e=>{e.target.reset(),a("")};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(n.lx,{className:"add-user row g-3 needs-validation justify-content-center",onSubmit:e=>{e.preventDefault();const o="dssui.user"+r;if(!r.match(/^[0-9]+$/))return void i("Please insert valid ID.");const n=t.some((e=>o===e.dom_uid));a(),n?i("Domain UID already exists."):(s({completeID:o}),l(e))},children:(0,d.jsxs)(n.YR,{children:[(0,d.jsx)(n.wV,{id:"basic-addon1",children:"dssui.user"}),(0,d.jsx)(n.jO,{className:"form-control",type:"text",name:"domUid",onChange:e=>{a(e.target.value.trim())},maxLength:6,required:!0}),(0,d.jsx)(n.u5,{type:"submit",color:"secondary",children:"Add Domain UID"})]})})})};var c=e=>{let{visible:s,onClose:t,formContent:o,onDelete:i,onCloseEdit:r}=e;return(0,d.jsxs)(n.Tk,{visible:s,backdrop:"static",onClose:t,children:[(0,d.jsx)(n.p0,{children:(0,d.jsx)(n.fl,{children:"Domain UID"})}),(0,d.jsx)(n.sD,{children:(0,d.jsxs)(n.lx,{className:"add-user row g-3 needs-validation justify-content-center",children:[(0,d.jsxs)(n.YR,{children:[(0,d.jsx)(n.wV,{id:"basic-addon1",children:"User ID"}),(0,d.jsx)(n.jO,{className:"form-control",type:"text",name:"ipAddress",disabled:!0,defaultValue:o.dom_uid,maxLength:6,required:!0})]}),(0,d.jsxs)(n.b7,{xs:12,className:"modal-footer",children:[(0,d.jsx)(n.u5,{color:"secondary",onClick:r,children:"Cancel"}),(0,d.jsx)(n.u5,{color:"primary",onClick:()=>i(o.dom_uid),children:"Delete user"})]})]})})]})},u=t(7174),m=t(33984);t(43533);var p=()=>{const[e,s]=(0,o.useState)([]),[t,r]=(0,o.useState)(!1),[n,p]=(0,o.useState)({}),[h,x]=(0,o.useState)({}),[j,f]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),[b,C]=(0,o.useState)(""),D=async()=>{console.log("fetching data..."),a().get("https://dssui-asset-manager.herokuapp.com/api/dom-uids").then((e=>{s(e.data)}))};(0,o.useEffect)((()=>{setTimeout((()=>{D()}),2e3)}),[s]);const _=()=>{r(!1)},y=e=>{C(e),v(!g)};return(0,d.jsxs)("div",{className:"table",children:[(0,d.jsx)(u.Z,{visible:j,popupMsg:b,onClose:()=>{f(!1)}}),(0,d.jsx)(m.Z,{visible:g,popupMsg:b,onClose:()=>{v(!1)}}),(0,d.jsx)(c,{visible:t,onClose:_,formContent:n,domUid:h,domUidList:e,onDelete:e=>{a().delete("https://dssui-asset-manager.herokuapp.com/api/delete-dom-uid/".concat(e)).then((()=>{C("Entry successfully deleted."),f(!j),r(!1),setTimeout((()=>{D()}),2e3)})).catch((e=>{r(!1),C(e.message),v(!g)}))},onError:y,onCloseEdit:_}),(0,d.jsx)("div",{className:"table card",children:(0,d.jsx)(l,{onAdd:e=>{a().post("https://dssui-asset-manager.herokuapp.com/api/add-dom-uid",{domUid:e.completeID}).then((e=>{C("Domain UID successfully added."),f(!j),setTimeout((()=>{D()}),2e3)})).catch((e=>{r(!1),C(e.message),v(!g),console.log(e.message)}))},domUidList:e,onError:y})}),(0,d.jsx)("div",{className:"table card",children:(0,d.jsx)(i.uE,{cleaner:!0,columns:["dom_uid",{key:"show_details",label:"",_style:{width:"1%"},filter:!1,sorter:!1}],tableProps:{hover:!0,responsive:!0},columnSorter:!0,items:e,pagination:!0,itemsPerPage:10,tableFilter:!0,scopedColumns:{show_details:e=>(0,d.jsx)("td",{className:"py-2",children:(0,d.jsx)(i.u5,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:()=>{console.log(e),p(e),x(e),r(!0)},children:"Edit"})})}})})]})}}}]);